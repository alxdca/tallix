export type Locale = 'en' | 'fr';

type PluralForms = { one: string; other: string };
export type TranslationValue = string | PluralForms;
export type TranslationParams = Record<string, string | number | boolean | null | undefined>;

export const SUPPORTED_LOCALES: Locale[] = ['en', 'fr'];
export const DEFAULT_LOCALE: Locale = 'en';

const translations: Record<Locale, Record<string, any>> = {
  en: {
    common: {
      loading: 'Loading…',
      saving: 'Saving…',
      apply: 'Apply',
      cancel: 'Cancel',
      confirm: 'Confirm',
      close: 'Close',
      back: 'Back',
      delete: 'Delete',
      remove: 'Remove',
      retry: 'Retry',
      add: 'Add',
      edit: 'Edit',
      create: 'Create',
      update: 'Update',
      save: 'Save',
      moveUp: 'Move up',
      moveDown: 'Move down',
      search: 'Search',
      searching: 'Searching…',
      select: 'Select',
      selectPlaceholder: 'Select…',
      browseFiles: 'Browse files',
      or: 'or',
      none: '—',
      yes: 'Yes',
      no: 'No',
      all: 'All',
      noneSelected: 'None',
      clear: 'Clear',
      details: 'Error details',
      table: 'Table',
      chart: 'Chart',
    },
    nav: {
      transactions: 'Transactions',
      accounts: 'Accounts',
      assets: 'Assets',
      planning: 'Planning',
      archive: 'Archive',
      settings: 'Settings',
      askTallix: 'Ask Tallix',
      myAccount: 'My account',
      logout: 'Log out',
    },
    app: {
      loadingBudget: 'Loading budget…',
      loading: 'Loading…',
      error: 'Error',
      retry: 'Retry',
      archiveTitle: 'Archive',
      archiveSubtitle: 'View your budgets from previous years',
    },
    copilot: {
      title: 'Ask Tallix',
      subtitle: 'Ask questions about your budget',
      placeholder: 'Ask a question…',
      ask: 'Ask',
      asking: 'Asking…',
      you: 'You',
      tallix: 'Tallix',
      confidence: 'Confidence',
      tryTheseQuestions: 'Try these questions',
      why: 'Why',
      details: 'Details',
      viewTransactions: 'View transactions',
      suggestionsTitle: 'Try one of these',
      noAnswerTitle: 'Ask your first question',
      noAnswerSubtitle: 'Try an example below.',
      summaryOverspend: 'You spent {actual} vs {budget} in {category} for {timeframe}.',
      summarySpend: 'You spent {actual} in {category} for {timeframe}.',
      summaryTopMerchants: 'Top merchants in {category} for {timeframe}.',
      summaryMoM: 'You spent {actual} in {category} for {timeframe}, {change} vs last month.',
      changeUp: '{percent}% higher',
      changeDown: '{percent}% lower',
      changeFlat: 'about the same',
      changeNoPrior: 'no prior month data',
      deltaLabel: 'Delta: {delta}',
      budgetLabel: 'Budget: {budget}',
      actualLabel: 'Actual: {actual}',
      previousLabel: 'Last month: {actual}',
      merchantsLabel: 'Top merchants',
      suggestionOverspend: 'Why are we over in groceries this month?',
      suggestionChange: 'What changed vs last month for dining?',
      suggestionYtd: 'How much did we spend on travel YTD?',
      close: 'Close',
      clearHistory: 'Clear history',
    },
    archive: {
      title: 'Archive',
      subtitle: 'View and switch between different budget years',
      currentYear: 'Current year',
      pastYears: 'Past years',
      current: 'Current',
      noYears: 'No years available',
      selectedYear: 'Viewing: {year}',
    },
    header: {
      budgetTitle: 'Budget {year}',
      initialBalance: 'Initial balance',
      income: 'Income',
      savings: 'Savings',
      expenses: 'Expenses',
      yearEndBalance: 'Year-end balance',
    },
    login: {
      adminSetup: 'Admin account setup',
      createAccount: 'Create an account',
      signIn: 'Sign in to your account',
      name: 'Name',
      yourName: 'Your name',
      email: 'Email',
      emailPlaceholder: 'you@example.com',
      password: 'Password',
      passwordMin: 'Minimum 8 characters',
      passwordPlaceholder: 'Your password',
      confirmPassword: 'Confirm password',
      confirmPasswordPlaceholder: 'Confirm password',
      loading: 'Loading…',
      alreadyHaveAccount: 'Already have an account? Sign in',
      noAccount: "Don't have an account yet? Sign up",
      signUp: 'Sign up',
      signInAction: 'Sign in',
      passwordMismatch: 'Passwords do not match',
      error: 'An error occurred',
    },
    userSettings: {
      title: 'My account',
      subtitle: 'Manage your personal information',
      info: 'Information',
      email: 'Email',
      name: 'Name',
      language: 'Language',
      country: 'Country',
      saveChanges: 'Save changes',
      saving: 'Saving…',
      passwordTitle: 'Change password',
      currentPassword: 'Current password',
      newPassword: 'New password',
      confirmNewPassword: 'Confirm new password',
      changePassword: 'Change password',
      changing: 'Changing…',
      settingsUpdated: 'Settings updated',
      settingsUpdateError: 'Failed to update settings',
      passwordMismatch: 'Passwords do not match',
      passwordMinLength: 'New password must be at least 6 characters',
      passwordChanged: 'Password changed successfully',
      currentPasswordInvalid: 'Current password is incorrect',
      passwordChangeError: 'Failed to change password',
    },
    language: {
      en: 'English',
      fr: 'French',
    },
    countries: {
      none: '—',
    },
    budget: {
      income: 'Income',
      expenses: 'Expenses',
      savings: 'Savings',
      unclassified: 'Unclassified',
      categorized: 'Categorized',
    },
    planning: {
      title: 'Budget Planning {year}',
      subtitle: 'Configure your monthly expense forecasts for each category',
      category: 'Category',
      actions: 'Actions',
      annualTotal: 'Annual total',
      variable: 'Variable',
      remaining: 'Remaining',
      quickFill: 'Quick fill',
      quickFillTitle: 'Quick fill',
      monthlyAmount: 'Monthly amount',
      months: 'Months',
      all: 'All',
      none: 'None',
      semester1: 'H1',
      semester2: 'H2',
      quarter: 'Qtr',
      cancel: 'Cancel',
      apply: 'Apply',
      applying: 'Applying…',
      quickFillHint: 'Quick fill',
    },
    spreadsheet: {
      category: 'Category',
      annual: 'Annual',
      budget: 'Budget',
      actual: 'Actual',
      fundsAvailable: 'Available Funds (Payment accounts)',
      startOfMonth: 'Start of month',
      endOfMonth: 'End of month',
      estimatedEndOfMonth: 'Estimated end of month',
      budgetShort: 'B',
      actualShort: 'A',
      tooltip: 'Budget: {budget}\nActual: {actual}\nVariance: {variance} ({percent})',
    },
    accounts: {
      loading: 'Loading accounts…',
      title: 'Accounts - {year}',
      subtitle: 'Expected balance at the end of each month',
      table: 'Table',
      chart: 'Chart',
      initial: 'Initial',
      account: 'Account',
      initialBalance: 'Initial balance',
      clickToEdit: 'Click to edit',
      total: 'Total {title}',
      overallTotal: 'Grand total',
      netWorth: 'Net worth',
      paymentAccounts: 'Payment accounts',
      savingsAccounts: 'Savings accounts',
      noAccountsTitle: 'No accounts configured',
      noAccountsSubtitle: 'Accounts are created automatically from:',
      noAccountsBulletSavings: 'Items in your Savings groups',
      noAccountsBulletMethods: 'Payment methods marked as account in settings',
      totalLabel: 'Total',
    },
    assets: {
      title: 'Assets',
      subtitle: 'Track your net worth across years',
      addAsset: 'Add Asset',
      addDebt: 'Add Debt',
      assetType: 'Asset Type',
      total: 'Total',
      totalAssets: 'Total assets',
      autoCalculated: 'Auto-calculated from Accounts',
      loading: 'Loading assets…',
      noAssets: 'No custom assets yet',
      noAssetsSubtitle: 'Add custom assets like real estate, vehicles, or investments to track your net worth',
      deleteAsset: 'Delete Asset',
      deleteConfirm: 'Are you sure you want to delete "{name}"?',
      assetName: 'Asset name',
      assetNamePlaceholder: 'e.g., Real Estate, Vehicles',
      debtName: 'Debt name',
      debtNamePlaceholder: 'e.g., Mortgage, Loan',
      createAsset: 'Create Asset',
      createDebt: 'Create Debt',
      creating: 'Creating…',
      systemAsset: 'System asset',
      customAsset: 'Custom asset',
      clickToEdit: 'Click to edit',
      checkings: 'Checkings',
      savings: 'Savings',
      pension: 'Pension',
      investments: 'Investments',
      sectionAssets: 'Assets',
      sectionDebt: 'Debt',
      noDebt: 'No debt entries yet',
      netWorth: 'Net worth',
      totalDebt: 'Total debt',
      currentYearNote: 'Balances for the current year are computed from your current account balances.',
    },
    settings: {
      title: 'Settings',
      subtitle: 'Manage your categories, accounts and preferences',
      categories: 'Categories',
      preferences: 'Preferences',
      appearance: 'Appearance',
      paymentMethods: 'Payment methods',
      paymentMethodsTitle: 'Accounts & payment methods',
      addPaymentMethod: 'Add payment method',
      updatePaymentMethodError: 'Failed to update',
      createPaymentMethodError: 'Failed to create',
      duplicatePaymentMethod: 'This account or payment method already exists: "{name}"',
      confirmDeletePaymentMethod: 'Are you sure you want to delete this payment method?',
      deletePaymentMethodTitle: 'Delete payment method',
      confirmDeleteGroup: 'Are you sure you want to delete this group and all its items?',
      confirmDeleteItemTitle: 'Delete item',
      confirmDeleteItem: 'Are you sure you want to delete this item?',
      emptyGroups: 'No groups created',
      addItem: 'Add item',
      addGroup: 'Add group',
      dropHere: 'Drag items here',
      groupPlaceholder: 'Group name…',
      itemPlaceholder: 'Item name…',
      expenses: 'Expenses',
      income: 'Income',
      savings: 'Savings',
      emptyPaymentMethods: 'No payment methods created',
      nameLabel: 'Name',
      institutionLabel: 'Institution',
      institutionPlaceholder: 'Bank, issuer…',
      paymentMethodNamePlaceholder: 'Payment method name…',
      institutionOptionalPlaceholder: 'Institution (optional)',
      settlementDay: 'Settlement day',
      settlementDayHelp:
        'Billing cycle closing day (1-31). e.g., 18 = transactions from the 18th to the 17th are counted next month.',
      linkedAccount: 'Linked account',
      linkedAccountHelp: 'Account whose balance will be affected by transactions with this payment method',
      linkedAccountNone: 'None',
      linkedTo: 'Linked to: {name}',
      linkedUnknown: 'Unknown',
      settlementBadge: 'Closes on day {day}',
      accountLabel: 'Account',
      savingsLabel: 'Savings',
      activateAccount: 'Enable as account',
      activateSavings: 'Enable as savings account',
      savingsToggle: 'Savings',
      savingsTypeLabel: 'Savings type',
      savingsType: {
        epargne: 'Savings',
        prevoyance: 'Pension',
        investissements: 'Investments',
      },
      savingsTypePlaceholder: 'Type…',
      theme: 'Theme',
      themeDark: 'Dark',
      themeLight: 'Light',
      decimalSeparator: 'Decimal separator',
      decimalPoint: 'Dot (1,234.56)',
      decimalComma: 'Comma (1,234.56)',
      showBudgetBelowActual: 'Show budget below actual',
      deleteSelectionTitle: 'Delete selection',
      budgetSettings: 'Budget settings',
      startYear: 'Start year',
      startYearHelp: 'The earliest year shown in the app. Setting an earlier year will create missing years automatically.',
      startYearInvalid: 'Please enter a valid year',
      startYearFuture: 'Start year cannot be in the future (current year: {currentYear})',
      startYearUpdated: 'Start year updated successfully',
      startYearUpdatedWithYears: 'Start year updated. Created years: {years}',
    },
    transactions: {
      title: 'Transactions',
      loading: 'Loading transactions…',
      empty: 'No transactions recorded',
      emptyFiltered: 'No transactions match the filters',
      clearFilters: 'Clear filters',
      bulkImport: 'Bulk import',
      deleteSelected: 'Delete ({count})',
      deleteTransferTitle: 'Delete transfer',
      deleteTransactionTitle: 'Delete transaction',
      deleteSelectionTitle: 'Delete selection',
      deleteSelectionMessage: 'Are you sure you want to delete {count} item{suffix}?',
      deleteTransferConfirm: 'Are you sure you want to delete this transfer?',
      deleteTransactionConfirm: 'Are you sure you want to delete this transaction?',
      summaryShown: 'Shown',
      summaryExpenses: 'Expenses',
      summarySavings: 'Savings',
      summaryBalance: 'Balance',
      typeTransaction: 'Transaction',
      typeTransfer: 'Transfer',
      datePlaceholder: 'DD/MM/YYYY',
      openCalendar: 'Open calendar',
      descriptionPlaceholder: 'Description (optional)',
      amountPlaceholder: 'Amount',
      commentPlaceholder: 'Comment',
      thirdPartyPlaceholder: 'Third party (recipient/sender)',
      savingsAccounts: 'Savings accounts',
      selectCategory: 'Select a category',
      uncategorized: 'Uncategorized',
      filterSelectAll: 'Select all',
      accounting: 'Accounting',
      accountingMonth: 'Accounting month',
      date: 'Date',
      thirdParty: 'Third party',
      description: 'Description',
      comment: 'Comment',
      paymentMethod: 'Payment method',
      category: 'Category',
      amount: 'Amount',
      actions: 'Actions',
      potentialDuplicate: 'Potential duplicate',
      dismissWarning: 'Dismiss warning',
      filterPlaceholder: 'Filter…',
      all: 'All',
      transfersSection: '↔ TRANSFERS',
      paymentMethodsSelected: '{count} selected',
      paymentMethodsPlaceholder: 'Select…',
      sectionExpenses: '▸ EXPENSES',
      sectionIncome: '▸ INCOME',
      typeExpense: 'Expense',
      typeIncome: 'Income',
      typeToggleToExpense: 'Income (click to change to Expense)',
      typeToggleToIncome: 'Expense (click to change to Income)',
      categoryRequired: 'Category *',
      accounted: 'Accounted',
      deleteSelection: 'Delete selection',
      selectAll: 'Select all',
      sourceAccount: 'Source account',
      destinationAccount: 'Destination account',
    },
    bulkImport: {
      titleSelect: 'Bulk import',
      titleUpload: 'Import a PDF',
      titlePaste: 'Paste from spreadsheet',
      titlePreview: 'Review transactions',
      titleSuccess: 'Import complete',
      subtitle: 'Select the data source to import',
      optionPdfLabel: 'PDF',
      optionPdf: 'PDF statement',
      optionSpreadsheetLabel: 'Spreadsheet',
      optionSpreadsheetHint: 'Paste from Excel/Sheets',
      dropPdf: 'Drop your PDF file here',
      selectedFile: 'Selected file: {name}',
      startImport: 'Start import',
      aiOnlyLabel: 'AI-only classification',
      sendDirectToAi: 'Send PDF directly to AI without preprocessing',
      classificationTitle: 'AI extraction and classification',
      classificationProgress: 'Processing…',
      classificationHint: 'Analyzing the PDF with AI…',
      analyzingFile: 'Analyzing file…',
      instructionsTitle: 'Instructions',
      instructionOrder: 'Configure the column order below (drag and drop)',
      instructionOpenFile: 'Open your Excel or Google Sheets file',
      instructionCopy: 'Select and copy the cells (Ctrl+C / Cmd+C)',
      instructionPaste: 'Paste into the area below (Ctrl+V / Cmd+V)',
      columnOrderLabel: 'Column order:',
      reset: 'Reset',
      addColumn: '+ Add',
      requiredLabel: 'Required:',
      requiredFields: 'Date, Third party, Payment method, Amount',
      optionalLabel: 'Optional:',
      optionalFields: 'Description, Category, Comment',
      sampleColumns: 'Category, Comment',
      pastePlaceholder:
        'Paste your data here...\n\nExample:\n15/01/2026    Migros    Grocery    -125.50\n16/01/2026    Employer    January salary    4500.00',
      analyzeData: 'Analyze data',
      analyzing: 'Analyzing…',
      totalIncome: 'Total income',
      totalExpenses: 'Total expenses',
      netBalance: 'Net balance',
      transactionsSelected: '{selected} / {total} transactions selected',
      toggleAll: 'Select all',
      toggleNone: 'Deselect all',
      applyAll: 'Apply to all selected:',
      category: 'Category',
      paymentMethod: 'Payment method',
      expenses: 'Expenses',
      savings: 'Savings',
      savingsAccounts: 'Savings accounts',
      accounted: 'Accounted',
      type: 'Type',
      typeHint: 'Type: Expense or Income',
      categoryRequired: 'Category *',
      thirdPartyPlaceholder: 'Third party *',
      paymentMethodPlaceholder: '- Payment method * -',
      commentPlaceholder: 'Comment',
      incomeToggle: 'Income (click to change to Expense)',
      expenseToggle: 'Expense (click to change to Income)',
      expense: 'Expense',
      income: 'Income',
      classifyWithAi: 'Classify with AI',
      classifyWithAiTitle: 'Automatically classify with AI',
      classificationInProgress: 'AI classification in progress',
      classificationBatchProgress: 'Processing batch {done} of {total}',
      classificationTransactions: 'Analyzing {count} transactions…',
      classificationRunning: 'Classification…',
      addRow: 'Add row',
      importing: 'Importing…',
      importButton: 'Import {count} transactions',
      importedSuccessTitle: '{count} transactions imported successfully',
      importedSuccessSubtitle: 'Transactions have been added to your budget.',
      columns: {
        date: 'Date',
        thirdParty: 'Third party',
        description: 'Description',
        amount: 'Amount',
        category: 'Category',
        paymentMethod: 'Payment method',
        comment: 'Comment',
      },
      errors: {
        pasteData: 'Please paste data',
        columnsRequired: 'Date and Amount columns are required.',
        pdfRequired: 'Please drop a PDF file.',
        selectPdf: 'Please select a PDF file.',
        noPdfTransactions: 'No transactions found in the PDF.',
        noPdfTransactionsUnsupported: 'No transactions found in the PDF. The format may not be supported.',
        parsePdfFailed: 'Failed to parse the PDF.',
        noValidTransactions:
          'No valid transactions found. Check that your data matches the configured column order.',
        parseError: 'Failed to analyze data',
        classifyError: 'Automatic classification failed',
        selectAtLeastOne: 'Please select at least one transaction to import',
        rowsIncomplete:
          'Rows {rows} are incomplete. Each transaction must have a valid date, a third party, a payment method and an amount.',
        rowsNoCategory: 'Rows {rows} have no category. Please assign a category to each transaction.',
        importFailed: 'Failed to import transactions',
      },
      steps: {
        source: 'Choose source',
        preview: 'Review transactions',
        success: 'Import complete',
      },
    },
    categoryCombobox: {
      expense: 'Expense',
      income: 'Income',
      savings: 'Savings',
      placeholder: 'Select or create…',
      create: 'Create "{name}"',
      creating: 'Creating…',
      createAction: 'Create',
      assignGroup: 'Assign to group:',
      empty: 'No categories available',
      noResults: 'No results for "{search}"',
      expenses: 'Expenses',
      savingsGroup: 'Savings',
    },
    months: [
      'January',
      'February',
      'March',
      'April',
      'May',
      'June',
      'July',
      'August',
      'September',
      'October',
      'November',
      'December',
    ],
    errors: {
      UNKNOWN: 'Something went wrong',
      INTERNAL_SERVER_ERROR: 'Internal server error',
      ROUTE_NOT_FOUND: 'Route not found',
      PAYMENT_METHOD_DUPLICATE: 'Payment method already exists: "{displayName}"',
      IMPORT_TRANSACTIONS_INCOMPLETE: 'Transactions {indexes} are incomplete.',
      LLM_CLASSIFICATION_FAILED: 'Classification failed',
      AUTH_INVALID_CREDENTIALS: 'Invalid email or password',
      AUTH_INITIAL_SETUP_REQUIRED: 'Initial setup required',
      AUTH_EMAIL_REQUIRED: 'Email and password are required',
      AUTH_PASSWORD_MIN: 'Password must be at least 8 characters',
      AUTH_NO_TOKEN: 'No token provided',
      AUTH_INVALID_TOKEN: 'Invalid token',
      AUTH_USER_NOT_FOUND: 'User not found',
      AUTH_INVALID_LANGUAGE: 'Invalid language',
      AUTH_INVALID_COUNTRY: 'Invalid country code',
      AUTH_CURRENT_PASSWORD_REQUIRED: 'Current password and new password are required',
      AUTH_PASSWORD_SHORT: 'New password must be at least 6 characters',
      AUTH_INVALID_CURRENT_PASSWORD: 'Current password is incorrect',
    },
  },
  fr: {
    common: {
      loading: 'Chargement…',
      saving: 'Enregistrement…',
      apply: 'Appliquer',
      cancel: 'Annuler',
      confirm: 'Confirmer',
      close: 'Fermer',
      back: 'Retour',
      delete: 'Supprimer',
      remove: 'Retirer',
      retry: 'Réessayer',
      add: 'Ajouter',
      edit: 'Modifier',
      create: 'Créer',
      update: 'Mettre à jour',
      save: 'Enregistrer',
      moveUp: 'Monter',
      moveDown: 'Descendre',
      search: 'Rechercher',
      searching: 'Recherche…',
      select: 'Sélectionner',
      selectPlaceholder: 'Sélectionner…',
      browseFiles: 'Parcourir les fichiers',
      or: 'ou',
      none: '—',
      yes: 'Oui',
      no: 'Non',
      all: 'Tous',
      noneSelected: 'Aucun',
      clear: 'Effacer',
      details: 'Détails de l’erreur',
      table: 'Tableau',
      chart: 'Graphique',
    },
    nav: {
      transactions: 'Transactions',
      accounts: 'Comptes',
      assets: 'Patrimoine',
      planning: 'Planification',
      archive: 'Archive',
      settings: 'Paramètres',
      askTallix: 'Demander à Tallix',
      myAccount: 'Mon compte',
      logout: 'Se déconnecter',
    },
    app: {
      loadingBudget: 'Chargement du budget…',
      loading: 'Chargement…',
      error: 'Erreur',
      retry: 'Réessayer',
      archiveTitle: 'Archive',
      archiveSubtitle: 'Consultez vos budgets des années précédentes',
    },
    copilot: {
      title: 'Demander à Tallix',
      subtitle: 'Posez des questions sur votre budget',
      placeholder: 'Posez une question…',
      ask: 'Demander',
      asking: 'Analyse…',
      you: 'Vous',
      tallix: 'Tallix',
      confidence: 'Confiance',
      tryTheseQuestions: 'Essayez ces questions',
      why: 'Pourquoi',
      details: 'Détails',
      viewTransactions: 'Voir les transactions',
      suggestionsTitle: 'Essayez un exemple',
      noAnswerTitle: 'Posez votre première question',
      noAnswerSubtitle: 'Essayez un exemple ci-dessous.',
      summaryOverspend: 'Vous avez dépensé {actual} vs {budget} pour {category} ({timeframe}).',
      summarySpend: 'Vous avez dépensé {actual} pour {category} ({timeframe}).',
      summaryTopMerchants: 'Principaux commerçants pour {category} ({timeframe}).',
      summaryMoM: 'Vous avez dépensé {actual} pour {category} ({timeframe}), {change} vs le mois dernier.',
      changeUp: '{percent}% de plus',
      changeDown: '{percent}% de moins',
      changeFlat: 'à peu près pareil',
      changeNoPrior: 'pas de mois précédent',
      deltaLabel: 'Écart : {delta}',
      budgetLabel: 'Budget : {budget}',
      actualLabel: 'Réel : {actual}',
      previousLabel: 'Mois dernier : {actual}',
      merchantsLabel: 'Principaux commerçants',
      suggestionOverspend: 'Pourquoi sommes-nous au-dessus en courses ce mois-ci ?',
      suggestionChange: 'Qu\'est-ce qui a changé vs le mois dernier pour les restaurants ?',
      suggestionYtd: 'Combien avons-nous dépensé en voyages YTD ?',
      close: 'Fermer',
      clearHistory: 'Effacer l\'historique',
    },
    archive: {
      title: 'Archive',
      subtitle: 'Consultez et basculez entre différentes années budgétaires',
      currentYear: 'Année actuelle',
      pastYears: 'Années passées',
      current: 'Actuel',
      noYears: 'Aucune année disponible',
      selectedYear: 'Affichage : {year}',
    },
    header: {
      budgetTitle: 'Budget {year}',
      initialBalance: 'Solde initial',
      income: 'Revenus',
      savings: 'Épargne',
      expenses: 'Dépenses',
      yearEndBalance: "Solde fin d'année",
    },
    login: {
      adminSetup: 'Création du compte administrateur',
      createAccount: 'Créer un compte',
      signIn: 'Connexion à votre compte',
      name: 'Nom',
      yourName: 'Votre nom',
      email: 'Email',
      emailPlaceholder: 'vous@exemple.com',
      password: 'Mot de passe',
      passwordMin: '8 caractères minimum',
      passwordPlaceholder: 'Votre mot de passe',
      confirmPassword: 'Confirmer le mot de passe',
      confirmPasswordPlaceholder: 'Confirmez le mot de passe',
      loading: 'Chargement…',
      alreadyHaveAccount: 'Déjà un compte ? Se connecter',
      noAccount: "Pas encore de compte ? S'inscrire",
      signUp: "S'inscrire",
      signInAction: 'Se connecter',
      passwordMismatch: 'Les mots de passe ne correspondent pas',
      error: 'Une erreur est survenue',
    },
    userSettings: {
      title: 'Mon compte',
      subtitle: 'Gérez vos informations personnelles',
      info: 'Informations',
      email: 'Email',
      name: 'Nom',
      language: 'Langue',
      country: 'Pays',
      saveChanges: 'Enregistrer les modifications',
      saving: 'Enregistrement…',
      passwordTitle: 'Changer le mot de passe',
      currentPassword: 'Mot de passe actuel',
      newPassword: 'Nouveau mot de passe',
      confirmNewPassword: 'Confirmer le nouveau mot de passe',
      changePassword: 'Modifier le mot de passe',
      changing: 'Modification…',
      settingsUpdated: 'Paramètres mis à jour',
      settingsUpdateError: 'Erreur lors de la mise à jour des paramètres',
      passwordMismatch: 'Les mots de passe ne correspondent pas',
      passwordMinLength: 'Le nouveau mot de passe doit contenir au moins 6 caractères',
      passwordChanged: 'Mot de passe modifié avec succès',
      currentPasswordInvalid: 'Mot de passe actuel incorrect',
      passwordChangeError: 'Erreur lors du changement de mot de passe',
    },
    language: {
      en: 'Anglais',
      fr: 'Français',
    },
    countries: {
      none: '—',
    },
    budget: {
      income: 'Revenus',
      expenses: 'Dépenses',
      savings: 'Épargne',
      unclassified: 'Non catégorisé',
      categorized: 'Catégorisé',
    },
    planning: {
      title: 'Planification du Budget {year}',
      subtitle: 'Configurez vos prévisions de dépenses mensuelles pour chaque catégorie',
      category: 'Catégorie',
      actions: 'Actions',
      annualTotal: 'Total Annuel',
      variable: 'Variable',
      remaining: 'Restant',
      quickFill: 'Remplissage rapide',
      quickFillTitle: 'Remplissage rapide',
      monthlyAmount: 'Montant mensuel',
      months: 'Mois concernés',
      all: 'Tous',
      none: 'Aucun',
      semester1: 'S1',
      semester2: 'S2',
      quarter: 'Trim.',
      cancel: 'Annuler',
      apply: 'Appliquer',
      applying: 'Application…',
      quickFillHint: 'Remplissage rapide',
    },
    spreadsheet: {
      category: 'Catégorie',
      annual: 'Annuel',
      budget: 'Budget',
      actual: 'Réel',
      fundsAvailable: 'Fonds Disponibles (Comptes de paiement)',
      startOfMonth: 'Début du mois',
      endOfMonth: 'Fin du mois',
      estimatedEndOfMonth: 'Fin de mois estimée',
      budgetShort: 'B',
      actualShort: 'R',
      tooltip: 'Budget: {budget}\nRéel: {actual}\nÉcart: {variance} ({percent})',
    },
    accounts: {
      loading: 'Chargement des comptes…',
      title: 'Comptes - {year}',
      subtitle: 'Solde attendu à la fin de chaque mois',
      table: 'Tableau',
      chart: 'Graphique',
      initial: 'Initial',
      account: 'Compte',
      initialBalance: 'Solde initial',
      clickToEdit: 'Cliquer pour modifier',
      total: 'Total {title}',
      overallTotal: 'Total général',
      netWorth: 'Patrimoine',
      paymentAccounts: 'Comptes de paiement',
      savingsAccounts: "Comptes d'épargne",
      noAccountsTitle: 'Aucun compte configuré',
      noAccountsSubtitle: 'Les comptes sont créés automatiquement à partir de :',
      noAccountsBulletSavings: 'Les éléments dans vos groupes Épargne',
      noAccountsBulletMethods: 'Les modes de paiement marqués comme compte dans les paramètres',
      totalLabel: 'Total',
    },
    assets: {
      title: 'Patrimoine',
      subtitle: 'Suivez votre patrimoine net au fil des années',
      addAsset: 'Ajouter un actif',
      addDebt: 'Ajouter une dette',
      assetType: 'Type d\'actif',
      total: 'Total',
      totalAssets: 'Total des biens',
      autoCalculated: 'Calculé automatiquement depuis les Comptes',
      loading: 'Chargement du patrimoine…',
      noAssets: 'Aucun actif personnalisé',
      noAssetsSubtitle: 'Ajoutez des actifs personnalisés comme l\'immobilier ou les véhicules pour suivre votre patrimoine',
      deleteAsset: 'Supprimer l\'actif',
      deleteConfirm: 'Êtes-vous sûr de vouloir supprimer "{name}" ?',
      assetName: 'Nom de l\'actif',
      assetNamePlaceholder: 'ex: Immobilier, Véhicules',
      debtName: 'Nom de la dette',
      debtNamePlaceholder: 'ex: Hypothèque, Prêt',
      createAsset: 'Créer l\'actif',
      createDebt: 'Créer la dette',
      creating: 'Création…',
      systemAsset: 'Actif système',
      customAsset: 'Actif personnalisé',
      clickToEdit: 'Cliquer pour modifier',
      checkings: 'Comptes courants',
      savings: 'Épargne',
      pension: 'Prévoyance',
      investments: 'Investissements',
      sectionAssets: 'Patrimoine',
      sectionDebt: 'Dettes',
      noDebt: 'Aucune dette pour le moment',
      netWorth: 'Patrimoine net',
      totalDebt: 'Total des dettes',
      currentYearNote: "Les soldes de l'année en cours sont calculés à partir des soldes actuels de vos comptes.",
    },
    settings: {
      title: 'Paramètres',
      subtitle: 'Gérez vos catégories, comptes et préférences',
      categories: 'Catégories',
      preferences: 'Préférences',
      appearance: 'Apparence',
      paymentMethods: 'Moyens de paiement',
      paymentMethodsTitle: 'Comptes & Moyens de paiement',
      addPaymentMethod: 'Ajouter un moyen de paiement',
      updatePaymentMethodError: 'Erreur lors de la mise à jour',
      createPaymentMethodError: 'Erreur lors de la création',
      duplicatePaymentMethod: 'Ce compte ou moyen de paiement existe déjà : "{name}"',
      confirmDeletePaymentMethod: 'Êtes-vous sûr de vouloir supprimer ce moyen de paiement ?',
      deletePaymentMethodTitle: 'Supprimer le moyen de paiement',
      confirmDeleteGroup: 'Êtes-vous sûr de vouloir supprimer ce groupe et tous ses éléments ?',
      confirmDeleteItemTitle: "Supprimer l'élément",
      confirmDeleteItem: 'Êtes-vous sûr de vouloir supprimer cet élément ?',
      emptyGroups: 'Aucun groupe créé',
      addItem: 'Ajouter un élément',
      addGroup: 'Ajouter un groupe',
      dropHere: 'Glissez des éléments ici',
      groupPlaceholder: 'Nom du groupe…',
      itemPlaceholder: "Nom de l'élément...",
      expenses: 'Dépenses',
      income: 'Revenus',
      savings: 'Épargne',
      emptyPaymentMethods: 'Aucun moyen de paiement créé',
      nameLabel: 'Nom',
      institutionLabel: 'Institution',
      institutionPlaceholder: 'Banque, émetteur…',
      paymentMethodNamePlaceholder: 'Nom du moyen de paiement…',
      institutionOptionalPlaceholder: 'Institution (optionnel)',
      settlementDay: 'Clôture',
      settlementDayHelp:
        'Jour de clôture du cycle de facturation (1-31). Ex: 18 = les transactions du 18 au 17 sont comptabilisées le mois suivant.',
      linkedAccount: 'Compte lié',
      linkedAccountHelp: 'Compte dont le solde sera affecté par les transactions avec ce mode de paiement',
      linkedAccountNone: 'Aucun',
      linkedTo: 'Lié à : {name}',
      linkedUnknown: 'Inconnu',
      settlementBadge: 'Clôture le {day} du mois',
      accountLabel: 'Compte',
      savingsLabel: 'Épargne',
      activateAccount: 'Activer comme compte',
      activateSavings: 'Activer comme compte épargne',
      savingsToggle: 'Épargne',
      savingsTypeLabel: "Type d'épargne",
      savingsType: {
        epargne: 'Épargne',
        prevoyance: 'Prévoyance',
        investissements: 'Investissements',
      },
      savingsTypePlaceholder: 'Type…',
      theme: 'Thème',
      themeDark: 'Sombre',
      themeLight: 'Clair',
      decimalSeparator: 'Séparateur décimal',
      decimalPoint: "Point (1'234.56)",
      decimalComma: "Virgule (1'234,56)",
      showBudgetBelowActual: 'Afficher le budget sous le réel',
      deleteSelectionTitle: 'Supprimer la sélection',
      budgetSettings: 'Paramètres du budget',
      startYear: 'Année de départ',
      startYearHelp: "La première année affichée dans l'application. Définir une année antérieure créera automatiquement les années manquantes.",
      startYearInvalid: 'Veuillez entrer une année valide',
      startYearFuture: "L'année de départ ne peut pas être dans le futur (année actuelle : {currentYear})",
      startYearUpdated: 'Année de départ mise à jour avec succès',
      startYearUpdatedWithYears: 'Année de départ mise à jour. Années créées : {years}',
    },
    transactions: {
      title: 'Transactions',
      loading: 'Chargement des transactions…',
      empty: 'Aucune transaction enregistrée',
      emptyFiltered: 'Aucune transaction ne correspond aux filtres',
      clearFilters: 'Effacer les filtres',
      bulkImport: 'Import en masse',
      deleteSelected: 'Supprimer ({count})',
      deleteTransferTitle: 'Supprimer le transfert',
      deleteTransactionTitle: 'Supprimer la transaction',
      deleteSelectionTitle: 'Supprimer la sélection',
      deleteSelectionMessage: 'Êtes-vous sûr de vouloir supprimer {count} élément{suffix} ?',
      deleteTransferConfirm: 'Êtes-vous sûr de vouloir supprimer ce transfert ?',
      deleteTransactionConfirm: 'Êtes-vous sûr de vouloir supprimer cette transaction ?',
      summaryShown: 'Affichées',
      summaryExpenses: 'Dépenses',
      summarySavings: 'Épargne',
      summaryBalance: 'Solde',
      typeTransaction: 'Transaction',
      typeTransfer: 'Transfert',
      datePlaceholder: 'JJ/MM/AAAA',
      openCalendar: 'Ouvrir le calendrier',
      descriptionPlaceholder: 'Description (optionnel)',
      amountPlaceholder: 'Montant',
      commentPlaceholder: 'Commentaire',
      thirdPartyPlaceholder: 'Tiers (destinataire/émetteur)',
      savingsAccounts: "Comptes d'épargne",
      selectCategory: 'Sélectionner une catégorie',
      uncategorized: 'Non catégorisé',
      filterSelectAll: 'Tout sélectionner',
      accounting: 'Comptabilisé',
      accountingMonth: 'Mois comptable',
      date: 'Date',
      thirdParty: 'Tiers',
      description: 'Description',
      comment: 'Commentaire',
      paymentMethod: 'Mode',
      category: 'Catégorie',
      amount: 'Montant',
      actions: 'Actions',
      potentialDuplicate: 'Doublon potentiel',
      dismissWarning: 'Ignorer l\'avertissement',
      filterPlaceholder: 'Filtrer…',
      all: 'Toutes',
      transfersSection: '↔ TRANSFERTS',
      paymentMethodsSelected: '{count} sélectionnés',
      paymentMethodsPlaceholder: 'Sélectionner…',
      sectionExpenses: '▸ DÉPENSES',
      sectionIncome: '▸ REVENUS',
      typeExpense: 'Dépense',
      typeIncome: 'Revenu',
      typeToggleToExpense: 'Revenu (cliquer pour changer en Dépense)',
      typeToggleToIncome: 'Dépense (cliquer pour changer en Revenu)',
      categoryRequired: 'Catégorie *',
      accounted: 'Comptabilisé',
      deleteSelection: 'Supprimer la sélection',
      selectAll: 'Tout sélectionner',
      sourceAccount: 'Compte source',
      destinationAccount: 'Compte destination',
    },
    bulkImport: {
      titleSelect: 'Import en masse',
      titleUpload: 'Importer un PDF',
      titlePaste: 'Coller depuis un tableur',
      titlePreview: 'Vérifier les transactions',
      titleSuccess: 'Import terminé',
      subtitle: 'Sélectionnez la source des données à importer',
      optionPdfLabel: 'PDF',
      optionPdf: 'Relevé bancaire PDF',
      optionSpreadsheetLabel: 'Tableur',
      optionSpreadsheetHint: 'Coller depuis Excel/Sheets',
      dropPdf: 'Glissez-déposez votre fichier PDF ici',
      selectedFile: 'Fichier sélectionné : {name}',
      startImport: "Démarrer l'import",
      aiOnlyLabel: 'Classification IA uniquement',
      sendDirectToAi: "Envoyer le PDF directement à l'IA sans pré-traitement",
      classificationTitle: 'Extraction et classification IA',
      classificationProgress: 'Traitement en cours…',
      classificationHint: "Analyse du PDF avec l'IA…",
      analyzingFile: 'Analyse du fichier en cours…',
      instructionsTitle: 'Instructions',
      instructionOrder: "Configurez l'ordre des colonnes ci-dessous (glisser-déposer)",
      instructionOpenFile: 'Ouvrez votre fichier Excel ou Google Sheets',
      instructionCopy: 'Sélectionnez et copiez les cellules (Ctrl+C / Cmd+C)',
      instructionPaste: 'Collez dans la zone ci-dessous (Ctrl+V / Cmd+V)',
      columnOrderLabel: 'Ordre des colonnes :',
      reset: 'Réinitialiser',
      addColumn: '+ Ajouter',
      requiredLabel: 'Requis :',
      requiredFields: 'Date, Tiers, Mode, Montant',
      optionalLabel: 'Optionnel :',
      optionalFields: 'Description, Catégorie, Commentaire',
      sampleColumns: 'Catégorie, Commentaire',
      pastePlaceholder:
        'Collez vos données ici...\n\nExemple :\n15/01/2026    Migros    Courses alimentaires    -125.50\n16/01/2026    Employeur    Salaire janvier    4500.00',
      analyzeData: 'Analyser les données',
      analyzing: 'Analyse en cours…',
      totalIncome: 'Total revenus',
      totalExpenses: 'Total dépenses',
      netBalance: 'Solde net',
      transactionsSelected: '{selected} / {total} transactions sélectionnées',
      toggleAll: 'Tout sélectionner',
      toggleNone: 'Tout désélectionner',
      applyAll: 'Appliquer à toutes les sélectionnées :',
      category: 'Catégorie',
      paymentMethod: 'Mode',
      expenses: 'Dépenses',
      savings: 'Épargne',
      savingsAccounts: "Comptes d'épargne",
      accounted: 'Comptabilisé',
      type: 'Type',
      typeHint: 'Type: Dépense ou Revenu',
      categoryRequired: 'Catégorie *',
      thirdPartyPlaceholder: 'Tiers *',
      paymentMethodPlaceholder: '- Mode * -',
      commentPlaceholder: 'Commentaire',
      incomeToggle: 'Revenu (cliquer pour changer en Dépense)',
      expenseToggle: 'Dépense (cliquer pour changer en Revenu)',
      expense: 'Dépense',
      income: 'Revenu',
      classifyWithAi: 'Classifier avec IA',
      classifyWithAiTitle: "Classifier automatiquement avec l'IA",
      classificationInProgress: 'Classification IA en cours',
      classificationBatchProgress: 'Traitement du lot {done} sur {total}',
      classificationTransactions: 'Analyse de {count} transactions…',
      classificationRunning: 'Classification…',
      addRow: 'Ajouter une ligne',
      importing: 'Import en cours…',
      importButton: 'Importer {count} transactions',
      importedSuccessTitle: '{count} transactions importées avec succès',
      importedSuccessSubtitle: 'Les transactions ont été ajoutées à votre budget.',
      columns: {
        date: 'Date',
        thirdParty: 'Tiers',
        description: 'Description',
        amount: 'Montant',
        category: 'Catégorie',
        paymentMethod: 'Mode de paiement',
        comment: 'Commentaire',
      },
      errors: {
        pasteData: 'Veuillez coller des données',
        columnsRequired: 'Les colonnes Date et Montant sont obligatoires.',
        pdfRequired: 'Veuillez déposer un fichier PDF.',
        selectPdf: 'Veuillez sélectionner un fichier PDF.',
        noPdfTransactions: 'Aucune transaction trouvée dans le PDF.',
        noPdfTransactionsUnsupported: "Aucune transaction trouvée dans le PDF. Le format n'est peut-être pas pris en charge.",
        parsePdfFailed: "Erreur lors de l'analyse du PDF.",
        noValidTransactions:
          "Aucune transaction valide trouvée. Vérifiez que vos données correspondent à l'ordre des colonnes configuré.",
        parseError: "Erreur lors de l'analyse des données",
        classifyError: "Échec de la classification automatique",
        selectAtLeastOne: 'Veuillez sélectionner au moins une transaction à importer',
        rowsIncomplete:
          'Les lignes {rows} sont incomplètes. Chaque transaction doit avoir une date valide, un tiers, un mode de paiement et un montant.',
        rowsNoCategory: "Les lignes {rows} n'ont pas de catégorie. Veuillez assigner une catégorie à chaque transaction.",
        importFailed: "Échec de l'importation des transactions",
      },
      steps: {
        source: 'Sélection de la source',
        preview: 'Vérifier les transactions',
        success: 'Import terminé',
      },
    },
    categoryCombobox: {
      expense: 'Dépense',
      income: 'Revenu',
      savings: 'Épargne',
      placeholder: 'Sélectionner ou créer…',
      create: 'Créer "{name}"',
      creating: 'Création…',
      createAction: 'Créer',
      assignGroup: 'Assigner au groupe :',
      empty: 'Aucune catégorie disponible',
      noResults: 'Aucun résultat pour "{search}"',
      expenses: 'Dépenses',
      savingsGroup: 'Épargne',
    },
    months: ['Janvier', 'Février', 'Mars', 'Avril', 'Mai', 'Juin', 'Juillet', 'Août', 'Septembre', 'Octobre', 'Novembre', 'Décembre'],
    errors: {
      UNKNOWN: 'Une erreur est survenue',
      INTERNAL_SERVER_ERROR: 'Erreur interne du serveur',
      ROUTE_NOT_FOUND: 'Route introuvable',
      PAYMENT_METHOD_DUPLICATE: 'Ce moyen de paiement existe déjà : "{displayName}"',
      IMPORT_TRANSACTIONS_INCOMPLETE: 'Les transactions {indexes} sont incomplètes.',
      LLM_CLASSIFICATION_FAILED: 'Échec de la classification',
      AUTH_INVALID_CREDENTIALS: 'Email ou mot de passe invalide',
      AUTH_INITIAL_SETUP_REQUIRED: 'Configuration initiale requise',
      AUTH_EMAIL_REQUIRED: 'Email et mot de passe sont requis',
      AUTH_PASSWORD_MIN: 'Le mot de passe doit contenir au moins 8 caractères',
      AUTH_NO_TOKEN: "Aucun jeton fourni",
      AUTH_INVALID_TOKEN: 'Jeton invalide',
      AUTH_USER_NOT_FOUND: 'Utilisateur introuvable',
      AUTH_INVALID_LANGUAGE: 'Langue invalide',
      AUTH_INVALID_COUNTRY: 'Code pays invalide',
      AUTH_CURRENT_PASSWORD_REQUIRED: 'Mot de passe actuel et nouveau mot de passe requis',
      AUTH_PASSWORD_SHORT: 'Le nouveau mot de passe doit contenir au moins 6 caractères',
      AUTH_INVALID_CURRENT_PASSWORD: 'Mot de passe actuel incorrect',
    },
  },
};

function getNestedValue(locale: Locale, key: string): TranslationValue | undefined {
  const parts = key.split('.');
  let current: any = translations[locale];
  for (const part of parts) {
    if (current && typeof current === 'object' && part in current) {
      current = current[part];
    } else {
      return undefined;
    }
  }
  return current as TranslationValue;
}

function formatTemplate(template: string, params?: TranslationParams): string {
  if (!params) return template;
  return template.replace(/\{(\w+)\}/g, (_match, key) => {
    const value = params[key];
    return value === undefined || value === null ? '' : String(value);
  });
}

export function translate(locale: Locale, key: string, params?: TranslationParams): string {
  const value = getNestedValue(locale, key);
  if (!value) return key;

  if (typeof value === 'string') {
    return formatTemplate(value, params);
  }

  const count = typeof params?.count === 'number' ? params?.count : 0;
  const chosen = count === 1 ? value.one : value.other;
  return formatTemplate(chosen, params);
}

export function getMonthNames(locale: Locale): string[] {
  return translations[locale].months as string[];
}

export function hasTranslation(locale: Locale, key: string): boolean {
  return Boolean(getNestedValue(locale, key));
}
